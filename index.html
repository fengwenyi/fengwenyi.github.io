<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-cn">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="我叫冯文议，Java工程师。 2017年毕业于阿坝师范学院计算机应用专业， 现在就职于深圳警圣技术股份有限公司， 主要负责接口开发工作。 开源软件：JavaLib，api-result。">
<meta name="keywords" content="冯文议,Wenyi Feng,Erwin Feng,fengwenyi,博客,编程,Java,Spring,Spring Boot,Spring Cloud,MyBatis">
<meta property="og:type" content="website">
<meta property="og:title" content="冯文议的博客">
<meta property="og:url" content="https://fengwenyi.github.io/index.html">
<meta property="og:site_name" content="冯文议的博客">
<meta property="og:description" content="我叫冯文议，Java工程师。 2017年毕业于阿坝师范学院计算机应用专业， 现在就职于深圳警圣技术股份有限公司， 主要负责接口开发工作。 开源软件：JavaLib，api-result。">
<meta property="og:locale" content="zh-cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="冯文议的博客">
<meta name="twitter:description" content="我叫冯文议，Java工程师。 2017年毕业于阿坝师范学院计算机应用专业， 现在就职于深圳警圣技术股份有限公司， 主要负责接口开发工作。 开源软件：JavaLib，api-result。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://fengwenyi.github.io/">





  <title>冯文议的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-cn">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">冯文议的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">我叫冯文议，Java工程师。 2017年毕业于阿坝师范学院计算机应用专业， 现在就职于深圳警圣技术股份有限公司， 主要负责接口开发工作。 开源软件：JavaLib，api-result。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-首页"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-关于"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-标签"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-归档"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://fengwenyi.github.io/2019/05/12/个人网站V4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="冯文议 · Erwin Feng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯文议的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/12/个人网站V4/" itemprop="url">个人网站第四次改版了</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-12T19:40:46+08:00">
                2019-05-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  666
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://upload-images.jianshu.io/upload_images/5805596-3ce1f93ac184c018.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="主页"></p>
<p>我是冯文议，一名JAVA工程师。</p>
<p>从2015年学习做网页开始，一直在折腾自己的个人网站，如今已经折腾了4个版本了。平时也忙着学习JAVA，只能抽空余时间随便写写，所以更新速度稍显缓慢。</p>
<p>写个人网站，可能有以下两个原因：</p>
<ul>
<li><p>展示自己。认识一个新朋友，我们自我介绍，那么我该如何用简洁的语言，向他介绍我自己呢，出于这样的想法，诞生了个人网站，我可以不断打磨介绍自己的语言，词语，以便对面可以快速，也更准确的了解自己。</p>
</li>
<li><p>总结。我想把我过去一年学到的东西总结一下，然后分享给大家，也想帮助那些正在迷路上的朋友，哪怕一丁点，也是很开心的。</p>
</li>
</ul>
<p>由于自己毕竟是业余的，加之，菜是原罪的缘故，会有问题，或者不合理的地方，如果你发现了，可以通过留言或者邮箱的方式，告诉给我，我会寻找解决办法，以便能及时修复问题。</p>
<p>下面聊一聊，第四次版本，具体都有哪些内容。</p>
<h4 id="首页"><a href="#首页" class="headerlink" title="首页"></a>首页</h4><p>首页该有的都有，但绝不多余，只求简洁。我就在这里就让你感受到我欢迎朋友的热情。</p>
<p>你可以点击播放背景音乐，这样可以一边听音乐，一边浏览。</p>
<h4 id="认识我"><a href="#认识我" class="headerlink" title="认识我"></a>认识我</h4><p><img src="https://upload-images.jianshu.io/upload_images/5805596-d6da806b62c23b5c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="我"></p>
<p>来一段自我介绍吧</p>
<h4 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h4><p>2018年开始，我自己写了一个开源框架，如今又增加了两个，不知道你是否感兴趣呢？</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-2d89b02368d61ae6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开源框架"></p>
<h4 id="爱情"><a href="#爱情" class="headerlink" title="爱情"></a>爱情</h4><p><img src="https://upload-images.jianshu.io/upload_images/5805596-2ed798c4a4ea3982.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="爱情"></p>
<p>一首小诗，爱情是生活不可获取的重要部分，祝天下有情人终成眷属。</p>
<h4 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h4><p><img src="https://upload-images.jianshu.io/upload_images/5805596-c2eba682b6eb92b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="博客"></p>
<p>个人网站只是一个聚合展示，更多内容，还是要去看博客的，你说，对吗？你可以选取你方便的，关注一波。</p>
<h4 id="留言"><a href="#留言" class="headerlink" title="留言"></a>留言</h4><p><img src="https://upload-images.jianshu.io/upload_images/5805596-519742e7b5f2e96b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="留言"></p>
<p>来都来了，总得留下点什么吧</p>
<p>遇到什么问题，遇到什么事，都是可以在这里说的，留言不公开。</p>
<h4 id="移动端"><a href="#移动端" class="headerlink" title="移动端"></a>移动端</h4><p>这个版本，依然做了兼容移动设备</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-f9e78d2a06b0f4c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="移动端-首页"></p>
<p>这是我的华为 P20 谷歌浏览器的效果截图</p>
<p>再也没有多余的东西，如此简洁。</p>
<h4 id="夜间模式"><a href="#夜间模式" class="headerlink" title="夜间模式"></a>夜间模式</h4><p>大家都是夜猫子，我也是，夜间学习，自然是要保护好眼睛的</p>
<p>考虑到这一点，因此也提供了夜间模式，时间段是，晚上8点，到早点8点</p>
<h4 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h4><p>说了这么多，你是不是等不及了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">www.fengwenyi.com</span><br></pre></td></tr></table></figure>
<h2 id="最后，感谢大家一直以来的支持"><a href="#最后，感谢大家一直以来的支持" class="headerlink" title="最后，感谢大家一直以来的支持"></a>最后，感谢大家一直以来的支持</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://fengwenyi.github.io/2019/03/23/SpringBoot结合Elasticsearch，手机搜索小例子/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="冯文议 · Erwin Feng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯文议的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/23/SpringBoot结合Elasticsearch，手机搜索小例子/" itemprop="url">Elasticsearch实战篇——Spring Boot整合ElasticSearch</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-23T13:51:07+08:00">
                2019-03-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  4.2k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  20
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>当前Spring Boot很是流行，包括我自己，也是在用Spring Boot集成其他框架进行项目开发，所以这一节，我们一起来探讨Spring Boot整合ElasticSearch的问题。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/03/23/SpringBoot结合Elasticsearch，手机搜索小例子/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://fengwenyi.github.io/2019/03/11/Elasticsearch实战篇/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="冯文议 · Erwin Feng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯文议的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/11/Elasticsearch实战篇/" itemprop="url">Elasticsearch实战篇——Spring Boot整合ElasticSearch</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-11T22:26:44+08:00">
                2019-03-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  2.5k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  11
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>当前Spring Boot很是流行，包括我自己，也是在用Spring Boot集成其他框架进行项目开发，所以这一节，我们一起来探讨Spring Boot整合ElasticSearch的问题。</p>
<p>步骤如下：</p>
<p>第一步，通读文档。</p>
<p>第二步，用三种方式实现基本CRUD操作。</p>
<p>第三步，分析实战中可能用到的查询。</p>
<p>第四步，搜索专题。</p>
<p>还没有学过Elasticsearch的朋友，可以先学这个系列的第一节（这个系列共三节），如果你有不明白或者不正确的地方，可以给我评论、留言或者私信。</p>
<h2 id="第一步，通读文档"><a href="#第一步，通读文档" class="headerlink" title="第一步，通读文档"></a>第一步，通读文档</h2><p><a href="https://docs.spring.io/spring-data/elasticsearch/docs/3.1.5.RELEASE/reference/html/" target="_blank" rel="noopener">Spring Data Elasticsearch 官方文档</a>，这是当前最新的文档。</p>
<h4 id="关于repository"><a href="#关于repository" class="headerlink" title="关于repository"></a>关于repository</h4><p>文档一开始就介绍 <code>CrudRepository</code> ，比如，继承 <code>Repository</code>，其他比如 <code>JpaRepository</code>、<code>MongoRepository</code>是继承<code>CrudRepository</code>。也对其中的方法做了简单说明，我们一起来看一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public interface CrudRepository&lt;T, ID extends Serializable&gt;</span><br><span class="line">  extends Repository&lt;T, ID&gt; &#123;</span><br><span class="line"></span><br><span class="line">// Saves the given entity.</span><br><span class="line">  &lt;S extends T&gt; S save(S entity);      </span><br><span class="line"></span><br><span class="line">// Returns the entity identified by the given ID.</span><br><span class="line">  Optional&lt;T&gt; findById(ID primaryKey); </span><br><span class="line"></span><br><span class="line">// Returns all entities.</span><br><span class="line">  Iterable&lt;T&gt; findAll();               </span><br><span class="line"></span><br><span class="line">// Returns the number of entities.</span><br><span class="line">  long count();                        </span><br><span class="line"></span><br><span class="line">// Deletes the given entity.</span><br><span class="line">  void delete(T entity);               </span><br><span class="line"></span><br><span class="line">// Indicates whether an entity with the given ID exists.</span><br><span class="line">  boolean existsById(ID primaryKey);   </span><br><span class="line"></span><br><span class="line">  // … more functionality omitted.</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>好了，下面我们看一下今天的主角 <code>ElasticsearchRepository</code> 他是怎样的吧。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-7d08db984ae32d65.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ElasticsearchRepository继承图"></p>
<p>这说明什么？</p>
<ul>
<li><p>用法和JPA一样；</p>
</li>
<li><p>再这他除了有CRUD的基本功能之外，还有分页和排序。</p>
</li>
</ul>
<p>清楚了这之后，是不是应该考虑该如何使用了呢？</p>
<h4 id="如何用？"><a href="#如何用？" class="headerlink" title="如何用？"></a>如何用？</h4><p>没错，接下来，开始说如何用，也写了很多示例代码。相对来说，还是比较简单，这里就贴一下代码就行了吧。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">PersonRepository</span> <span class="keyword">extends</span> <span class="title">Repository</span>&lt;<span class="title">User</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">List&lt;Person&gt; <span class="title">findByEmailAddressAndLastname</span><span class="params">(EmailAddress emailAddress, String lastname)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Enables the distinct flag for the query</span></span><br><span class="line">  <span class="function">List&lt;Person&gt; <span class="title">findDistinctPeopleByLastnameOrFirstname</span><span class="params">(String lastname, String firstname)</span></span>;</span><br><span class="line">  <span class="function">List&lt;Person&gt; <span class="title">findPeopleDistinctByLastnameOrFirstname</span><span class="params">(String lastname, String firstname)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Enabling ignoring case for an individual property</span></span><br><span class="line">  <span class="function">List&lt;Person&gt; <span class="title">findByLastnameIgnoreCase</span><span class="params">(String lastname)</span></span>;</span><br><span class="line">  <span class="comment">// Enabling ignoring case for all suitable properties</span></span><br><span class="line">  <span class="function">List&lt;Person&gt; <span class="title">findByLastnameAndFirstnameAllIgnoreCase</span><span class="params">(String lastname, String firstname)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Enabling static ORDER BY for a query</span></span><br><span class="line">  <span class="function">List&lt;Person&gt; <span class="title">findByLastnameOrderByFirstnameAsc</span><span class="params">(String lastname)</span></span>;</span><br><span class="line">  <span class="function">List&lt;Person&gt; <span class="title">findByLastnameOrderByFirstnameDesc</span><span class="params">(String lastname)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>是不是这样，就可以正常使用了呢？</p>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>当然可以，但是如果错了问题怎么办呢，官网写了一个常见的问题，比如包扫描问题，没有你要的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">HumanRepository</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">someHumanMethod</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HumanRepositoryImpl</span> <span class="keyword">implements</span> <span class="title">HumanRepository</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">someHumanMethod</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Your custom implementation</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ContactRepository</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">someContactMethod</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function">User <span class="title">anotherContactMethod</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ContactRepositoryImpl</span> <span class="keyword">implements</span> <span class="title">ContactRepository</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">someContactMethod</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Your custom implementation</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> User <span class="title">anotherContactMethod</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Your custom implementation</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你也可以自己写接口，并且去实现它。</p>
<p>说完理论，作为我，应该在实际的代码中如何运用呢？</p>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>官方也提供了很多示例代码，我们一起来看看。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PersonController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Autowired</span> PersonRepository repository;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@RequestMapping</span>(value = <span class="string">"/persons"</span>, method = RequestMethod.GET)</span><br><span class="line">  HttpEntity&lt;PagedResources&lt;Person&gt;&gt; persons(Pageable pageable,</span><br><span class="line">    PagedResourcesAssembler assembler) &#123;</span><br><span class="line"></span><br><span class="line">    Page&lt;Person&gt; persons = repository.findAll(pageable);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(assembler.toResources(persons), HttpStatus.OK);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段代码相对来说还是十分经典的，我相信很多人都看到别人的代码，可能都会问，它为什么会这么用呢，答案或许就在这里吧。</p>
<p>当然，这是以前的代码，或许现在用不一定合适。</p>
<h4 id="高级搜索"><a href="#高级搜索" class="headerlink" title="高级搜索"></a>高级搜索</h4><p>终于到高潮了！</p>
<p>学完我的第一节，你应该已经发现了，Elasticsearch搜索是一件十分复杂的事，为了用好它，我们不得不学好它。一起加油。</p>
<p>到这里，官方文档我们算是过了一遍了，大致明白了，他要告诉我们什么。其实，文档还有很多内容，可能你遇到的问题都能在里面找到答案。</p>
<p>最后，我们继续看一下官网写的一段处理得十分优秀的一段代码吧：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SearchQuery searchQuery = <span class="keyword">new</span> NativeSearchQueryBuilder()</span><br><span class="line">    .withQuery(matchAllQuery())</span><br><span class="line">    .withIndices(INDEX_NAME)</span><br><span class="line">    .withTypes(TYPE_NAME)</span><br><span class="line">    .withFields(<span class="string">"message"</span>)</span><br><span class="line">    .withPageable(PageRequest.of(<span class="number">0</span>, <span class="number">10</span>))</span><br><span class="line">    .build();</span><br><span class="line"></span><br><span class="line">CloseableIterator&lt;SampleEntity&gt; stream = elasticsearchTemplate.stream(searchQuery, SampleEntity.class);</span><br><span class="line"></span><br><span class="line">List&lt;SampleEntity&gt; sampleEntities = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">while</span> (stream.hasNext()) &#123;</span><br><span class="line">    sampleEntities.add(stream.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Spring-Boot整合ElasticSearch"><a href="#Spring-Boot整合ElasticSearch" class="headerlink" title="Spring Boot整合ElasticSearch"></a>Spring Boot整合ElasticSearch</h2><h4 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'org.springframework.boot:spring-boot-starter-data-elasticsearch'</span></span><br></pre></td></tr></table></figure>
<h4 id="添加配置"><a href="#添加配置" class="headerlink" title="添加配置"></a>添加配置</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  data:</span></span><br><span class="line"><span class="attr">    elasticsearch:</span></span><br><span class="line"><span class="attr">      cluster-nodes:</span> <span class="attr">localhost:9300</span></span><br><span class="line"><span class="attr">      cluster-name:</span> <span class="string">es-wyf</span></span><br></pre></td></tr></table></figure>
<p>这样就完成了整合，接下来我们用两种方式操作。</p>
<h2 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h2><p>我们先写一个的实体类，借助这个实体类呢来完成基础的CRUD功能。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Accessors</span>(chain = <span class="keyword">true</span>)</span><br><span class="line"><span class="meta">@Document</span>(indexName = <span class="string">"blog"</span>, type = <span class="string">"java"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BlogModel</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">6320548148250372657L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@Field(type = FieldType.Date, format = DateFormat.basic_date)</span></span><br><span class="line">    <span class="meta">@DateTimeFormat</span>(pattern = <span class="string">"yyyy-MM-dd"</span>)</span><br><span class="line">    <span class="meta">@JsonFormat</span>(pattern = <span class="string">"yyyy-MM-dd"</span>, timezone = <span class="string">"GMT+8"</span>)</span><br><span class="line">    <span class="keyword">private</span> Date time;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意id字段是必须的，可以不写注解@Id。</p>
<h2 id="Repository"><a href="#Repository" class="headerlink" title="Repository"></a>Repository</h2><h4 id="BlogRepository"><a href="#BlogRepository" class="headerlink" title="BlogRepository"></a>BlogRepository</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BlogRepository</span> <span class="keyword">extends</span> <span class="title">ElasticsearchRepository</span>&lt;<span class="title">BlogModel</span>, <span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="基础操作"><a href="#基础操作" class="headerlink" title="基础操作"></a>基础操作</h4><p>基础操作的代码，都是在 <code>BlogController</code> 里面写。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/blog"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BlogController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BlogRepository blogRepository;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>添加</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/add"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">add</span><span class="params">(@RequestBody BlogModel blogModel)</span> </span>&#123;</span><br><span class="line">    blogRepository.save(blogModel);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们添加一条数据，标题是：Elasticsearch实战篇：Spring Boot整合ElasticSearch，时间是：2019-03-06。我们来测试，看一下成不成功。</p>
<p>POST <a href="http://localhost:8080/blog/add" target="_blank" rel="noopener">http://localhost:8080/blog/add</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"title"</span>:<span class="string">"Elasticsearch实战篇：Spring Boot整合ElasticSearch"</span>,</span><br><span class="line">	<span class="attr">"time"</span>:<span class="string">"2019-05-06"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>得到响应：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Success"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>嘿，成功了。那接下来，我们一下查询方法测试一下。</p>
<p><strong>查询</strong></p>
<ul>
<li>根据ID查询</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/get/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">getById</span><span class="params">(@PathVariable String id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(id))</span><br><span class="line">        <span class="keyword">return</span> Result.error();</span><br><span class="line">    Optional&lt;BlogModel&gt; blogModelOptional = blogRepository.findById(id);</span><br><span class="line">    <span class="keyword">if</span> (blogModelOptional.isPresent()) &#123;</span><br><span class="line">        BlogModel blogModel = blogModelOptional.get();</span><br><span class="line">        <span class="keyword">return</span> Result.success(blogModel);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.error();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试一下：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-95e0ac47daebb7a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="测试根据ID查询"></p>
<p>ok，没问题。</p>
<ul>
<li>查询所有</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/get"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Iterable&lt;BlogModel&gt; iterable = blogRepository.findAll();</span><br><span class="line">    List&lt;BlogModel&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    iterable.forEach(list::add);</span><br><span class="line">    <span class="keyword">return</span> Result.success(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试一下：</p>
<p>GET <a href="http://localhost:8080/blog/get" target="_blank" rel="noopener">http://localhost:8080/blog/get</a></p>
<p>结果：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Success"</span>,</span><br><span class="line">    <span class="attr">"data"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"fFXTTmkBTzBv3AXCweFS"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"Elasticsearch实战篇：Spring Boot整合ElasticSearch"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2019-05-06"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">**根据ID修改**</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">@PostMapping("/update")</span><br><span class="line">public Result updateById(@RequestBody BlogModel blogModel) &#123;</span><br><span class="line">    String id = blogModel.getId();</span><br><span class="line">    if (StringUtils.isEmpty(id))</span><br><span class="line">        return Result.error();</span><br><span class="line">    blogRepository.save(blogModel);</span><br><span class="line">    return Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试：</p>
<p>POST <a href="http://localhost:8080/blog/update" target="_blank" rel="noopener">http://localhost:8080/blog/update</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"id"</span>:<span class="string">"fFXTTmkBTzBv3AXCweFS"</span>,</span><br><span class="line">	<span class="attr">"title"</span>:<span class="string">"Elasticsearch入门篇"</span>,</span><br><span class="line">	<span class="attr">"time"</span>:<span class="string">"2019-05-01"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>响应：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Success"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>查询一下：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-44762b9282f2afbc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="修改数据成功"></p>
<p>ok，成功！</p>
<p><strong>删除</strong></p>
<ul>
<li>根据ID删除</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"/delete/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">deleteById</span><span class="params">(@PathVariable String id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(id))</span><br><span class="line">        <span class="keyword">return</span> Result.error();</span><br><span class="line">    blogRepository.deleteById(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试：</p>
<p>DELETE  <a href="http://localhost:8080/blog/delete/fFXTTmkBTzBv3AXCweFS" target="_blank" rel="noopener">http://localhost:8080/blog/delete/fFXTTmkBTzBv3AXCweFS</a></p>
<p>响应：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Success"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们再查一下：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-31f49c418faeb701.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="删除数据成功"></p>
<ul>
<li>删除所有数据</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"/delete"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">deleteById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    blogRepository.deleteAll();</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="构造数据"><a href="#构造数据" class="headerlink" title="构造数据"></a>构造数据</h4><p>为了方便测试，我们先构造数据</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-3313589ddca0e1b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="构造查询数据"></p>
<h4 id="Repository查询操作"><a href="#Repository查询操作" class="headerlink" title="Repository查询操作"></a>Repository查询操作</h4><p><strong>搜索标题中的关键字</strong></p>
<p><code>BlogRepository</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;BlogModel&gt; <span class="title">findByTitleLike</span><span class="params">(String keyword)</span></span>;</span><br></pre></td></tr></table></figure>
<p><code>BlogController</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/rep/search/title"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">repSearchTitle</span><span class="params">(String keyword)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(keyword))</span><br><span class="line">        <span class="keyword">return</span> Result.error();</span><br><span class="line">    <span class="keyword">return</span> Result.success(blogRepository.findByTitleLike(keyword));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们来测试一下。</p>
<p>POST <a href="http://localhost:8080/blog/rep/search/title?keyword=java" target="_blank" rel="noopener">http://localhost:8080/blog/rep/search/title?keyword=java</a></p>
<p>结果：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Success"</span>,</span><br><span class="line">    <span class="attr">"data"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"f1XrTmkBTzBv3AXCeeFA"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java实战"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-03-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"fVXrTmkBTzBv3AXCHuGH"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java入门"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-01-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"flXrTmkBTzBv3AXCUOHj"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java基础"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-02-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"gFXrTmkBTzBv3AXCn-Eb"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java web"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-04-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"gVXrTmkBTzBv3AXCzuGh"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java ee"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-04-10"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>继续搜索：</p>
<p>GET <a href="http://localhost:8080/blog/rep/search/title?keyword=入门" target="_blank" rel="noopener">http://localhost:8080/blog/rep/search/title?keyword=入门</a></p>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Success"</span>,</span><br><span class="line">    <span class="attr">"data"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"hFXsTmkBTzBv3AXCtOE6"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"Elasticsearch入门"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2019-01-20"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"fVXrTmkBTzBv3AXCHuGH"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java入门"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-01-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"glXsTmkBTzBv3AXCBeH_"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"php入门"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-05-10"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为了验证，我们再换一个关键字搜索：</p>
<p>GET <a href="http://localhost:8080/blog/rep/search/title?keyword=java入门" target="_blank" rel="noopener">http://localhost:8080/blog/rep/search/title?keyword=java入门</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Success"</span>,</span><br><span class="line">    <span class="attr">"data"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"fVXrTmkBTzBv3AXCHuGH"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java入门"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-01-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"hFXsTmkBTzBv3AXCtOE6"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"Elasticsearch入门"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2019-01-20"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"glXsTmkBTzBv3AXCBeH_"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"php入门"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-05-10"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"gFXrTmkBTzBv3AXCn-Eb"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java web"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-04-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"gVXrTmkBTzBv3AXCzuGh"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java ee"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-04-10"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"f1XrTmkBTzBv3AXCeeFA"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java实战"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-03-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"flXrTmkBTzBv3AXCUOHj"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java基础"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-02-01"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>哈哈，有没有觉得很眼熟。</p>
<p>那根据上次的经验，我们正好换一种方式解决这个问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Query</span>(<span class="string">"&#123;\"match_phrase\":&#123;\"title\":\"?0\"&#125;&#125;"</span>)</span><br><span class="line"><span class="function">List&lt;BlogModel&gt; <span class="title">findByTitleCustom</span><span class="params">(String keyword)</span></span>;</span><br></pre></td></tr></table></figure>
<p>值得一提的是，官方文档示例代码可能是为了好看，出现问题。</p>
<p>官网文档给的错误示例：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-dcc56e96ef91cc47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="官网文档错误"></p>
<p>官网示例代码：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-f52fb1f0e4441826.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="官方示例代码"></p>
<p><a href="https://github.com/spring-projects/spring-data-elasticsearch/blob/416daef2f92734d0d1b5681265d719b9f1c347d5/src/test/java/org/springframework/data/elasticsearch/repositories/custom/SampleCustomMethodRepository.java" target="_blank" rel="noopener">官方示例代码</a></p>
<p>另外，<code>?0</code> 代指变量的意思。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/rep/search/title/custom"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">repSearchTitleCustom</span><span class="params">(String keyword)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(keyword))</span><br><span class="line">        <span class="keyword">return</span> Result.error();</span><br><span class="line">    <span class="keyword">return</span> Result.success(blogRepository.findByTitleCustom(keyword));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试一下：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-193d186464764674.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="测试成功示例"></p>
<p>ok，没有问题。</p>
<h2 id="ElasticsearchTemplate"><a href="#ElasticsearchTemplate" class="headerlink" title="ElasticsearchTemplate"></a>ElasticsearchTemplate</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ElasticsearchTemplate elasticsearchTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/search/title"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">searchTitle</span><span class="params">(String keyword)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(keyword))</span><br><span class="line">        <span class="keyword">return</span> Result.error();</span><br><span class="line">    SearchQuery searchQuery = <span class="keyword">new</span> NativeSearchQueryBuilder()</span><br><span class="line">            .withQuery(queryStringQuery(keyword))</span><br><span class="line">            .build();</span><br><span class="line">    List&lt;BlogModel&gt; list = elasticsearchTemplate.queryForList(searchQuery, BlogModel.class);</span><br><span class="line">    <span class="keyword">return</span> Result.success(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试：</p>
<p>POST <a href="http://localhost:8080/blog/search/title?keyword=java入门" target="_blank" rel="noopener">http://localhost:8080/blog/search/title?keyword=java入门</a></p>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Success"</span>,</span><br><span class="line">    <span class="attr">"data"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"fVXrTmkBTzBv3AXCHuGH"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java入门"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-01-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"hFXsTmkBTzBv3AXCtOE6"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"Elasticsearch入门"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2019-01-20"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"glXsTmkBTzBv3AXCBeH_"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"php入门"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-05-10"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"gFXrTmkBTzBv3AXCn-Eb"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java web"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-04-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"gVXrTmkBTzBv3AXCzuGh"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java ee"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-04-10"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"f1XrTmkBTzBv3AXCeeFA"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java实战"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-03-01"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"flXrTmkBTzBv3AXCUOHj"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"java基础"</span>,</span><br><span class="line">            <span class="attr">"time"</span>: <span class="string">"2018-02-01"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OK，暂时先到这里，关于搜索，我们后面会专门开一个专题，学习搜索。</p>
<h2 id="Jest"><a href="#Jest" class="headerlink" title="Jest"></a>Jest</h2><p>搜索中，发现Jest也可以操纵Elasticsearch，目前官方有star数1500+。网址：<a href="https://github.com/spring-projects/spring-data-elasticsearch。" target="_blank" rel="noopener">https://github.com/spring-projects/spring-data-elasticsearch。</a></p>
<p>另外，看到有人提供了Spring Boot整合的代码，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JestClientService</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">JestClient client=<span class="keyword">null</span>;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Value</span>(“$&#123;jest.elasticsearch.host&#125;”)</span><br><span class="line"> String host;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Value</span>(“$&#123;jest.elasticsearch.port&#125;”)</span><br><span class="line"> String port;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Value</span>(“$&#123;jest.elasticsearch.index&#125;”)</span><br><span class="line"> String indexName;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> JestClient <span class="title">getClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (<span class="keyword">this</span>.client==<span class="keyword">null</span>)&#123;</span><br><span class="line">GsonFireBuilder fireBuilder = <span class="keyword">new</span> GsonFireBuilder();</span><br><span class="line"> fireBuilder.enableExposeMethodResult();</span><br><span class="line"> </span><br><span class="line"> GsonBuilder builder = fireBuilder.createGsonBuilder();</span><br><span class="line"> builder.excludeFieldsWithoutExposeAnnotation();</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">final</span> Gson gson = builder.setDateFormat(AbstractJestClient.ELASTIC_SEARCH_DATE_FORMAT).create();</span><br><span class="line">System.out.println(“Establishing JEST Connection to Elasticsearch over HTTP: “+”http:<span class="comment">//”+this.host+”:”+this.port);</span></span><br><span class="line"> JestClientFactory factory = <span class="keyword">new</span> JestClientFactory();</span><br><span class="line"> factory.setHttpClientConfig(<span class="keyword">new</span> HttpClientConfig</span><br><span class="line"> .Builder(“http:<span class="comment">//”+this.host+”:”+this.port)</span></span><br><span class="line"> .multiThreaded(<span class="keyword">true</span>)</span><br><span class="line"> .readTimeout(<span class="number">20000</span>)</span><br><span class="line"> .gson(gson)</span><br><span class="line"> .build());</span><br><span class="line"> <span class="keyword">this</span>.client = factory.getObject();</span><br><span class="line"> </span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">this</span>.client;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><ul>
<li><a href="https://www.imooc.com/learn/889" target="_blank" rel="noopener">ElasticSearch入门</a></li>
</ul>
<ul>
<li><a href="https://www.elastic.co/" target="_blank" rel="noopener">Elastic官网</a></li>
</ul>
<ul>
<li><a href="https://www.elastic.co/cn/products/elasticsearch" target="_blank" rel="noopener">ElasticSearch</a></li>
</ul>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" target="_blank" rel="noopener">ElasticSearch Docs</a></li>
</ul>
<ul>
<li><a href="https://github.com/mobz/elasticsearch-head" target="_blank" rel="noopener">ElasticSearch Head</a></li>
</ul>
<ul>
<li><a href="http://www.sohu.com/a/257956489_430392" target="_blank" rel="noopener">搜索软件Elastic上市：市值近50亿美元 是开源项目商业化范本 </a></li>
</ul>
<h2 id="ElasticSearch-学习系列"><a href="#ElasticSearch-学习系列" class="headerlink" title="ElasticSearch 学习系列"></a>ElasticSearch 学习系列</h2><ul>
<li><a href="https://www.jianshu.com/p/7ea5f6fa5d66" target="_blank" rel="noopener">Elasticsearch入门篇——基础知识</a></li>
</ul>
<ul>
<li><a href="https://www.jianshu.com/p/bd2da1cde6f5" target="_blank" rel="noopener">Elasticsearch实战篇——Spring Boot整合ElasticSearch</a></li>
</ul>
<ul>
<li><a href="https://www.jianshu.com/p/69dc8ff24ecc" target="_blank" rel="noopener">Elasticsearch专题篇——搜索</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://fengwenyi.github.io/2019/03/02/first-blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="冯文议 · Erwin Feng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯文议的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/02/first-blog/" itemprop="url">My First Blog——Hexo+Github搭建个人网站</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-02T03:54:44+08:00">
                2019-03-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  287
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>终于用 hexo + github 搭建起自己的个人博客了，我的第一篇博文，就来记录一下搭建过程吧！</p>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<h2 id="初始化Project"><a href="#初始化Project" class="headerlink" title="初始化Project"></a>初始化Project</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init [project]</span><br></pre></td></tr></table></figure>
<h2 id="本地运行"><a href="#本地运行" class="headerlink" title="本地运行"></a>本地运行</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> [project]</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>他会告诉，可以访问：<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a></p>
<h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><p>这里，说一下，仓库的名称格式很严格，规则为：<strong>[your github username].github.io</strong></p>
<p>一定得是这样，否则你就跟我一样，慢慢折腾吧！</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>修改 <code>_config.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">[your</span> <span class="string">github</span> <span class="string">project</span> <span class="string">repository</span> <span class="string">git/url</span> <span class="string">address]</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<h2 id="发布到远程仓库"><a href="#发布到远程仓库" class="headerlink" title="发布到远程仓库"></a>发布到远程仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git remote add origin [your github repository git/url]</span><br><span class="line">git push -u origin master</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">hexo g/generate</span><br><span class="line">hexo d/deploy</span><br></pre></td></tr></table></figure>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><blockquote>
<p>ERROR Deployer not found: git</p>
</blockquote>
<p>未执行 <strong>npm install hexo-deployer-git –save</strong> 命令</p>
<blockquote>
<p>页面不能正常显示，或者404</p>
</blockquote>
<p>我折腾了一下午，原因是：我随便取得名字。</p>
<blockquote>
<p>无法执行 hexo 命令</p>
</blockquote>
<p>运行 <code>hexo init [project]</code> 后，未执行：cd [project]。</p>
<p>页面404，收到GitHub发的邮件，内容如下：</p>
<blockquote>
<p>The tag <code>fancybox</code> on line 77 in <code>themes/landscape/README.md</code> is not a recognized Liquid tag. For more information, see <a href="https://help.github.com/en/articles/page-build-failed-unknown-tag-error" target="_blank" rel="noopener">https://help.github.com/en/articles/page-build-failed-unknown-tag-error</a>.</p>
</blockquote>
<p>解决方案，see <a href="https://github.com/hexojs/hexo/issues/2590" target="_blank" rel="noopener">hexo github #2590</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://fengwenyi.github.io/2019/02/26/Elasticsearch入门篇/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="冯文议 · Erwin Feng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯文议的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/26/Elasticsearch入门篇/" itemprop="url">Elasticsearch入门篇——基础知识</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-26T07:37:48+08:00">
                2019-02-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  6.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  29
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>还记得大二的时候，初入Java大门，就大言不惭的给老师说，我要开发一个搜索引擎，结果是各种学习，各种找资料，终于在期末的时候，做出了一个简单新闻搜索页面，搜索模块是使用了Lucene。</p>
<p>今天，我们一起走进Elasticsearch的殿堂。</p>
<h2 id="Elastic"><a href="#Elastic" class="headerlink" title="Elastic"></a>Elastic</h2><p>以Elastic之名进行交易的数据搜索软件初创公司Elastic search于2018年10月5日（美国时间）上市。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-d9d52409bef7666d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Elastic 上市"></p>
<p>Elastic Search 只是 Elastic 公司最出名的产品之一，其中还包括有分布式日志解决方案 ELK（Elastic Search、Logstash、Kibana）、Beats、ECE等。</p>
<h2 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h2><p>官网：<a href="https://www.elastic.co/cn/products/elasticsearch" target="_blank" rel="noopener">https://www.elastic.co/cn/products/elasticsearch</a></p>
<blockquote>
<p>Elasticsearch is a distributed, RESTful search and analytics engine capable of solving a growing number of use cases. As the heart of the Elastic Stack, it centrally stores your data so you can discover the expected and uncover the unexpected.</p>
</blockquote>
<p>翻译：</p>
<blockquote>
<p>Elasticsearch 是一个分布式的基于 RESTful 接口的搜索和分析引擎，它能够解决越来越多的使用场景。作为 Elastic Stack 的核心，它集中存储数据，可以发现预期及之外的结果。</p>
</blockquote>
<h4 id="Elastic-Stack-的核心"><a href="#Elastic-Stack-的核心" class="headerlink" title="Elastic Stack 的核心"></a>Elastic Stack 的核心</h4><p>Elasticsearch 是一个分布式、RESTful 风格的搜索和数据分析引擎，能够解决不断涌现出的各种用例。作为 Elastic Stack 的核心，它集中存储您的数据，帮助您发现意料之中以及意料之外的情况。</p>
<h4 id="Elastic-Stack-的特点："><a href="#Elastic-Stack-的特点：" class="headerlink" title="Elastic Stack 的特点："></a>Elastic Stack 的特点：</h4><p><code>查询</code>  <strong>保持好奇心。从数据中探寻各种问题的答案。</strong></p>
<p>通过 Elasticsearch，您能够执行及合并多种类型的搜索（结构化数据、非结构化数据、地理位置、指标），搜索方式随心而变。先从一个简单的问题出发，试试看能够从中发现些什么。</p>
<p><code>分析</code>  <strong>大处着眼，全局在握。</strong></p>
<p>找到与查询最匹配的十个文档是一回事。但如果面对的是十亿行日志，又该如何解读呢？Elasticsearch 聚合让您能够从大处着眼，探索数据的趋势和模式。</p>
<p><code>速度</code>  <strong>Elasticsearch 很快。 快到不可思议。</strong></p>
<p>如果您能够立即获得答案，您与数据的关系就会发生变化。这样您就有条件进行迭代并涵盖更大的范围。</p>
<p>但是要达到这样的速度并非易事。我们通过有限状态转换器实现了用于全文检索的倒排索引，实现了用于存储数值数据和地理位置数据的 BKD 树，以及用于分析的列存储。</p>
<p>而且由于每个数据都被编入了索引，因此您再也不用因为某些数据没有索引而烦心。您可以用快到令人惊叹的速度使用和访问您的所有数据。</p>
<p><code>可扩展性</code>  <strong>可以在笔记本电脑上运行。 也可以在承载了 PB 级数据的成百上千台服务器上运行。</strong></p>
<p>原型环境和生产环境可无缝切换；无论 Elasticsearch 是在一个节点上运行，还是在一个包含 300 个节点的集群上运行，您都能够以相同的方式与 Elasticsearch 进行通信。</p>
<p>它能够水平扩展，每秒钟可处理海量事件，同时能够自动管理索引和查询在集群中的分布方式，以实现极其流畅的操作。</p>
<p><code>弹性</code>  <strong>我们在您高飞的时候保驾护航。</strong></p>
<p>硬件故障。网络分割。Elasticsearch 为您检测这些故障并确保您的集群（和数据）的安全性和可用性。通过跨集群复制功能，辅助集群可以作为热备份随时投入使用。</p>
<p>Elasticsearch 运行在一个分布式的环境中，从设计之初就考虑到了这一点，目的只有一个，让您永远高枕无忧。</p>
<p><code>灵活性</code>   <strong>具备多个案例场景？一个全有。</strong></p>
<p>数字、文本、地理位置、结构化数据、非结构化数据。欢迎使用所有数据类型。</p>
<p><a href="https://www.elastic.co/cn/solutions/app-search" target="_blank" rel="noopener">应用搜索</a>、<a href="https://www.elastic.co/cn/solutions/security-analytics" target="_blank" rel="noopener">安全分析</a>、<a href="https://www.elastic.co/cn/solutions/metrics" target="_blank" rel="noopener">指标</a>或<a href="https://www.elastic.co/cn/solutions/logging" target="_blank" rel="noopener">日志分析</a>只是全球众多公司利用 Elasticsearch 解决各种挑战的冰山一角。</p>
<p><code>操作的乐趣</code>  <strong>享受更多成功的时刻，告别垂头丧气的失落</strong></p>
<p>简单的事情就该简单做。我们确保 Elasticsearch 在任何规模下都能够易于操作，而无需在功能和性能方面做出牺牲。</p>
<p><code>客户端库</code>  <strong>使用您自己的编程语言与 Elasticsearch 进行交互</strong></p>
<p>Elasticsearch 使用的是标准的 RESTful 风格的 API 和 JSON。此外，我们还构建和维护了很多其他语言的客户端，例如 <a href="https://www.elastic.co/cn/guide/en/elasticsearch/client/index.html" target="_blank" rel="noopener">Java、Python、.NET、SQL 和 PHP</a>。与此同时，我们的<a href="https://www.elastic.co/cn/guide/en/elasticsearch/client/community/current/index.html" target="_blank" rel="noopener">社区也贡献了很多客户端</a>。这些客户端使用起来简单自然，而且就像 Elasticsearch 一样，不会对您的使用方式进行限制。</p>
<p><code>尽享强大功能</code>  <strong>延展 Elasticsearch</strong></p>
<p>为您的集群添加用户名和密码，监控 Elasticsearch 的性能表现，通过运行 Machine Learning 任务来发现异常等等，这些特性尽在 <a href="https://www.elastic.co/cn/products/stack" target="_blank" rel="noopener">Elastic Stack 内置的多项功能</a>。</p>
<p>通过 <a href="https://www.elastic.co/cn/products/stack/security" target="_blank" rel="noopener">Security</a>、<a href="https://www.elastic.co/cn/products/stack/monitoring" target="_blank" rel="noopener">Monitoring</a>、<a href="https://www.elastic.co/cn/products/stack/alerting" target="_blank" rel="noopener">Alerting</a>、<a href="https://www.elastic.co/cn/products/stack/reporting" target="_blank" rel="noopener">Reporting</a>、<a href="https://www.elastic.co/cn/products/stack/graph" target="_blank" rel="noopener">Graph 关联分析</a>和 <a href="https://www.elastic.co/cn/products/stack/machine-learning" target="_blank" rel="noopener">Machine Learning</a> 等功能，获得更优的使用体验。</p>
<p><code>HADOOP 和 SPARK</code> <strong>Elasticsearch 加 Hadoop</strong></p>
<p>Hadoop 中有大量数据？您可以使用 <a href="https://www.elastic.co/cn/products/hadoop" target="_blank" rel="noopener">Elasticsearch-Hadoop (ES-Hadoop)</a>连接器，利用 Elasticsearch 的实时搜索和分析功能处理您的大数据。这是两大领域最大优势的融合。</p>
<h2 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h2><p>我可以这样说，学习完这些概念，你或许就能明白RESTful的含义了，所以，学习这些概念是很有必要的。</p>
<p><strong>Near Realtime (NRT)</strong></p>
<p>Elasticsearch is a near-realtime search platform. What this means is there is a slight latency (normally one second) from the time you index a document until the time it becomes searchable.</p>
<p><strong>集群（Cluster）</strong></p>
<p>A cluster is a collection of one or more nodes (servers) that together holds your entire data and provides federated indexing and search capabilities across all nodes. A cluster is identified by a unique name which by default is “elasticsearch”. This name is important because a node can only be part of a cluster if the node is set up to join the cluster by its name.</p>
<p>Make sure that you don’t reuse the same cluster names in different environments, otherwise you might end up with nodes joining the wrong cluster. For instance you could use <code>logging-dev</code>, <code>logging-stage</code>, and <code>logging-prod</code> for the development, staging, and production clusters.</p>
<p>Note that it is valid and perfectly fine to have a cluster with only a single node in it. Furthermore, you may also have multiple independent clusters each with its own unique cluster name.</p>
<p><strong>节点（Node）</strong></p>
<p>A node is a single server that is part of your cluster, stores your data, and participates in the cluster’s indexing and search capabilities. Just like a cluster, a node is identified by a name which by default is a random Universally Unique IDentifier (UUID) that is assigned to the node at startup. You can define any node name you want if you do not want the default. This name is important for administration purposes where you want to identify which servers in your network correspond to which nodes in your Elasticsearch cluster.</p>
<p>A node can be configured to join a specific cluster by the cluster name. By default, each node is set up to join a cluster named <code>elasticsearch</code> which means that if you start up a number of nodes on your network and—assuming they can discover each other—they will all automatically form and join a single cluster named <code>elasticsearch</code>.</p>
<p>In a single cluster, you can have as many nodes as you want. Furthermore, if there are no other Elasticsearch nodes currently running on your network, starting a single node will by default form a new single-node cluster named <code>elasticsearch</code>.</p>
<p><strong>索引（Index）</strong></p>
<p>An index is a collection of documents that have somewhat similar characteristics. For example, you can have an index for customer data, another index for a product catalog, and yet another index for order data. An index is identified by a name (that must be all lowercase) and this name is used to refer to the index when performing indexing, search, update, and delete operations against the documents in it.</p>
<p>In a single cluster, you can define as many indexes as you want.</p>
<p><strong>类型（Type）</strong></p>
<p>A type used to be a logical category/partition of your index to allow you to store different types of documents in the same index, e.g. one type for users, another type for blog posts. It is no longer possible to create multiple types in an index, and the whole concept of types will be removed in a later version. See <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/removal-of-types.html" target="_blank" rel="noopener"><em>Removal of mapping types</em></a> for more.</p>
<p><strong>文档（Document）</strong></p>
<p>A document is a basic unit of information that can be indexed. For example, you can have a document for a single customer, another document for a single product, and yet another for a single order. This document is expressed in <a href="http://json.org/" target="_blank" rel="noopener">JSON</a> (JavaScript Object Notation) which is a ubiquitous internet data interchange format.</p>
<p>Within an index/type, you can store as many documents as you want. Note that although a document physically resides in an index, a document actually must be indexed/assigned to a type inside an index.</p>
<p><strong>Shards &amp; Replicas</strong></p>
<p>An index can potentially store a large amount of data that can exceed the hardware limits of a single node. For example, a single index of a billion documents taking up 1TB of disk space may not fit on the disk of a single node or may be too slow to serve search requests from a single node alone.</p>
<p>To solve this problem, Elasticsearch provides the ability to subdivide your index into multiple pieces called shards. When you create an index, you can simply define the number of shards that you want. Each shard is in itself a fully-functional and independent “index” that can be hosted on any node in the cluster.</p>
<p>Sharding is important for two primary reasons:</p>
<ul>
<li>It allows you to horizontally split/scale your content volume</li>
<li>It allows you to distribute and parallelize operations across shards (potentially on multiple nodes) thus increasing performance/throughput</li>
</ul>
<p>The mechanics of how a shard is distributed and also how its documents are aggregated back into search requests are completely managed by Elasticsearch and is transparent to you as the user.</p>
<p>In a network/cloud environment where failures can be expected anytime, it is very useful and highly recommended to have a failover mechanism in case a shard/node somehow goes offline or disappears for whatever reason. To this end, Elasticsearch allows you to make one or more copies of your index’s shards into what are called replica shards, or replicas for short.</p>
<p>Replication is important for two primary reasons:</p>
<ul>
<li>It provides high availability in case a shard/node fails. For this reason, it is important to note that a replica shard is never allocated on the same node as the original/primary shard that it was copied from.</li>
<li>It allows you to scale out your search volume/throughput since searches can be executed on all replicas in parallel.</li>
</ul>
<p>To summarize, each index can be split into multiple shards. An index can also be replicated zero (meaning no replicas) or more times. Once replicated, each index will have primary shards (the original shards that were replicated from) and replica shards (the copies of the primary shards).</p>
<p>The number of shards and replicas can be defined per index at the time the index is created. After the index is created, you may also change the number of replicas dynamically anytime. You can change the number of shards for an existing index using the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/indices-shrink-index.html" target="_blank" rel="noopener"><code>_shrink</code></a> and <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/indices-split-index.html" target="_blank" rel="noopener"><code>_split</code></a> APIs, however this is not a trivial task and pre-planning for the correct number of shards is the optimal approach.</p>
<p>By default, each index in Elasticsearch is allocated 5 primary shards and 1 replica which means that if you have at least two nodes in your cluster, your index will have 5 primary shards and another 5 replica shards (1 complete replica) for a total of 10 shards per index.</p>
<p><strong>结构</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/5805596-c3203c42dd2a9374.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ElasticSearch 结构"> </p>
<p>上图来自<a href="https://www.imooc.com/article/37345" target="_blank" rel="noopener">SpringBoot整合ElasticSearch及源码</a></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">cluster.name:</span> <span class="string">es-wyf</span></span><br><span class="line"><span class="string">node.name:</span> <span class="string">master</span></span><br><span class="line"><span class="string">path.data:</span> <span class="string">/Users/wenyifeng/Software/elasticsearch/data/master/data</span></span><br><span class="line"><span class="string">path.logs:</span> <span class="string">/Users/wenyifeng/Software/elasticsearch/data/master/logs</span></span><br><span class="line"><span class="string">network.host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line"><span class="string">http.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="string">discovery.zen.ping.unicast.hosts:</span> <span class="string">["127.0.0.1"]</span></span><br><span class="line"><span class="string">http.cors.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="string">http.cors.allow-origin:</span> <span class="string">"*"</span></span><br><span class="line"><span class="string">bootstrap.memory_lock:</span> <span class="literal">false</span></span><br><span class="line"><span class="string">bootstrap.system_call_filter:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>说起配置，我是很头疼的，看过视频教程和很多博文，都失败，最后在老大的帮助下，成功了，给了我如上配置。感谢我们老大对我的帮助。</p>
<h4 id="Mac-安装"><a href="#Mac-安装" class="headerlink" title="Mac 安装"></a>Mac 安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#下载并解压，进入目录，后台运行</span><br><span class="line">./bin/elasticsearch -d</span><br></pre></td></tr></table></figure>
<h4 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h4><blockquote>
<h3 id="Pulling-the-image"><a href="#Pulling-the-image" class="headerlink" title="Pulling the image"></a>Pulling the image</h3><p>Obtaining Elasticsearch for Docker is as simple as issuing a <code>docker pull</code> command against the Elastic Docker registry.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; docker pull docker.elastic.co/elasticsearch/elasticsearch:6.6.1</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>Alternatively, you can download other Docker images that contain only features available under the Apache 2.0 license. To download the images, go to <a href="https://www.docker.elastic.co/" target="_blank" rel="noopener">www.docker.elastic.co</a>.</p>
<h3 id="Running-Elasticsearch-from-the-command-line"><a href="#Running-Elasticsearch-from-the-command-line" class="headerlink" title="Running Elasticsearch from the command line"></a>Running Elasticsearch from the command line</h3><h4 id="Development-modeedit"><a href="#Development-modeedit" class="headerlink" title="Development modeedit"></a>Development mode<a href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/setup/install/docker.asciidoc" target="_blank" rel="noopener">edit</a></h4><p>Elasticsearch can be quickly started for development or testing use with the following command:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; docker run -p 9200:9200 -p 9300:9300 -e <span class="string">"discovery.type=single-node"</span> docker.elastic.co/elasticsearch/elasticsearch:6.6.1</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>官网教程：<a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/docker.html#docker-cli-run-dev-mode" target="_blank" rel="noopener">https://www.elastic.co/guide/en/elasticsearch/reference/6.6/docker.html#docker-cli-run-dev-mode</a></p>
<h4 id="CentOS安装"><a href="#CentOS安装" class="headerlink" title="CentOS安装"></a>CentOS安装</h4><p>这个问题，问下运维的同学吧。</p>
<h2 id="ElasticSearch-Head"><a href="#ElasticSearch-Head" class="headerlink" title="ElasticSearch Head"></a>ElasticSearch Head</h2><h4 id="服务器安装"><a href="#服务器安装" class="headerlink" title="服务器安装"></a>服务器安装</h4><p>地址：<a href="https://github.com/mobz/elasticsearch-head" target="_blank" rel="noopener">https://github.com/mobz/elasticsearch-head</a></p>
<p>从git上下下来，解压并进入，运行如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm run start</span><br></pre></td></tr></table></figure>
<h4 id="浏览器插件"><a href="#浏览器插件" class="headerlink" title="浏览器插件"></a>浏览器插件</h4><p>搜索 <code>ElasticSearch Head</code></p>
<h2 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h2><p>假设我们创建一个学校，有一个初2一班，学生的属性有：学号、姓名、年龄。</p>
<p>PUT <a href="http://localhost:9200/school" target="_blank" rel="noopener">http://localhost:9200/school</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"mappings"</span>:&#123;</span><br><span class="line">        <span class="attr">"c2_1"</span>: &#123;</span><br><span class="line">            <span class="attr">"properties"</span>:&#123;</span><br><span class="line">                <span class="attr">"no"</span>:&#123;</span><br><span class="line">                    <span class="attr">"type"</span>:<span class="string">"keyword"</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"name"</span>:&#123;</span><br><span class="line">                    <span class="attr">"type"</span>:<span class="string">"text"</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"age"</span>:&#123;</span><br><span class="line">                    <span class="attr">"type"</span>:<span class="string">"integer"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>返回:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"acknowledged"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"shards_acknowledged"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"index"</span>: <span class="string">"school"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-d9830015907278cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="创建索引"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-cceb65a4c5a7c03c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="索引结构"></p>
<p>这样就表示索引创建成功。</p>
<h2 id="基本操作CRUD"><a href="#基本操作CRUD" class="headerlink" title="基本操作CRUD"></a>基本操作CRUD</h2><h4 id="增加"><a href="#增加" class="headerlink" title="增加"></a>增加</h4><p>我们向里面插入一条数据，例如学号201901，姓名张三，年龄20。</p>
<p>POST <a href="http://localhost:9200/school/c2_1" target="_blank" rel="noopener">http://localhost:9200/school/c2_1</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"no"</span>:<span class="string">"201901"</span>,</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"张三"</span>,</span><br><span class="line">    <span class="attr">"age"</span>:<span class="number">20</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>返回：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"_index"</span>: <span class="string">"school"</span>,</span><br><span class="line">    <span class="attr">"_type"</span>: <span class="string">"c2_1"</span>,</span><br><span class="line">    <span class="attr">"_id"</span>: <span class="string">"8ygbK2kBenMJLC7I-EaK"</span>,</span><br><span class="line">    <span class="attr">"_version"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"result"</span>: <span class="string">"created"</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"_seq_no"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"_primary_term"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><p>我们通过返回的id查询一下:</p>
<p>GET <a href="http://localhost:9200/school/c2_1/8ygbK2kBenMJLC7I-EaK" target="_blank" rel="noopener">http://localhost:9200/school/c2_1/8ygbK2kBenMJLC7I-EaK</a></p>
<p>返回：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"_index"</span>: <span class="string">"school"</span>,</span><br><span class="line">    <span class="attr">"_type"</span>: <span class="string">"c2_1"</span>,</span><br><span class="line">    <span class="attr">"_id"</span>: <span class="string">"8ygbK2kBenMJLC7I-EaK"</span>,</span><br><span class="line">    <span class="attr">"_version"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"_seq_no"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"_primary_term"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"found"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"_source"</span>: &#123;</span><br><span class="line">        <span class="attr">"no"</span>: <span class="string">"201901"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"张三"</span>,</span><br><span class="line">        <span class="attr">"age"</span>: <span class="number">20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>查询出来了，这说明我们的增加和查询操作都成功了。</p>
<h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><p>我们把张三的年龄修改为22.</p>
<p>PUT <a href="http://localhost:9200/school/c2_1/8ygbK2kBenMJLC7I-EaK" target="_blank" rel="noopener">http://localhost:9200/school/c2_1/8ygbK2kBenMJLC7I-EaK</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"no"</span>:<span class="string">"201901"</span>,</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"张三"</span>,</span><br><span class="line">    <span class="attr">"age"</span>:<span class="number">22</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>返回：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"_index"</span>: <span class="string">"school"</span>,</span><br><span class="line">    <span class="attr">"_type"</span>: <span class="string">"c2_1"</span>,</span><br><span class="line">    <span class="attr">"_id"</span>: <span class="string">"8ygbK2kBenMJLC7I-EaK"</span>,</span><br><span class="line">    <span class="attr">"_version"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">"result"</span>: <span class="string">"updated"</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"_seq_no"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"_primary_term"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>查询一下：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-71babfb421e40090.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="验证查询"></p>
<p>与预期一致。</p>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><p>我们根据ID删除数据</p>
<p>DELETE <a href="http://localhost:9200/school/c2_1/8ygbK2kBenMJLC7I-EaK" target="_blank" rel="noopener">http://localhost:9200/school/c2_1/8ygbK2kBenMJLC7I-EaK</a></p>
<p>返回：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"_index"</span>: <span class="string">"school"</span>,</span><br><span class="line">    <span class="attr">"_type"</span>: <span class="string">"c2_1"</span>,</span><br><span class="line">    <span class="attr">"_id"</span>: <span class="string">"8ygbK2kBenMJLC7I-EaK"</span>,</span><br><span class="line">    <span class="attr">"_version"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">"result"</span>: <span class="string">"deleted"</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"_seq_no"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">"_primary_term"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再查询就没有，如下返回：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"_index"</span>: <span class="string">"school"</span>,</span><br><span class="line">    <span class="attr">"_type"</span>: <span class="string">"c2_1"</span>,</span><br><span class="line">    <span class="attr">"_id"</span>: <span class="string">"8ygbK2kBenMJLC7I-EaK"</span>,</span><br><span class="line">    <span class="attr">"found"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h4><p>删除索引之后，索引下面的索引文档都将被删除。</p>
<p>DELETE <a href="http://localhost:9200/school" target="_blank" rel="noopener">http://localhost:9200/school</a></p>
<p>返回：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"acknowledged"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="高级查询"><a href="#高级查询" class="headerlink" title="高级查询"></a>高级查询</h2><h4 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h4><p>通用查询API接口：<a href="http://localhost:9200/book/_search" target="_blank" rel="noopener">http://localhost:9200/book/_search</a></p>
<p>提交方式，可以是GET，也可以是POST（JSON）。</p>
<h4 id="构造数据"><a href="#构造数据" class="headerlink" title="构造数据"></a>构造数据</h4><p>我们首先构造数据，如下</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-6857ce4b5ab795c9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="测试：book 索引"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5805596-53e793cb8c4028bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="测试：book 数据"></p>
<h4 id="Query-Context"><a href="#Query-Context" class="headerlink" title="Query Context"></a>Query Context</h4><p><code>Query Context</code>：在查询过程中，除了判断文档是否满足查询条件外，Elasticsearch还会计算一个 <code>_score</code> 来标识匹配的程度，旨在判断目标文档和查询条件匹配的 <code>有多好</code>。简单来说就是，匹配到了吗？有多吻合呢?</p>
<h4 id="常用查询"><a href="#常用查询" class="headerlink" title="常用查询"></a>常用查询</h4><p>全文本搜索：针对文本类型的数据</p>
<p>字段级别查询：针对结构化数据，如数字、日期等</p>
<h4 id="全文本匹配"><a href="#全文本匹配" class="headerlink" title="全文本匹配"></a>全文本匹配</h4><p>搜索：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"match"</span>:&#123;</span><br><span class="line">            <span class="attr">"author"</span>:<span class="string">"明日科技"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">0.9808292</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EdWwL2kBvvhXwNB9h50h"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.9808292</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Java从入门到精通（第4版）（附光盘）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"明日科技"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10002</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-09-01"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这是模糊匹配，先进行分词，然后会把相关的都会查询出来，如下：</p>
<p>搜索：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"match"</span>:&#123;</span><br><span class="line">            <span class="attr">"title"</span>:<span class="string">"elasticsearch入门"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">0.3252806</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"FNW0L2kBvvhXwNB9pJ0W"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.3252806</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Python编程 从入门到实践"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"[美]埃里克·马瑟斯（Eric Matthes）"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10010</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-07-10"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EdWwL2kBvvhXwNB9h50h"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.28924954</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Java从入门到精通（第4版）（附光盘）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"明日科技"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10002</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-09-01"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EtWxL2kBvvhXwNB93p1F"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.2876821</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Elasticsearch实战"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"[美] 拉杜·乔戈（Radu Gheorghe） 马修·李·欣曼（Matthew"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10005</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2018-10-2"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"E9WzL2kBvvhXwNB9MZ3I"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.21268348</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Laravel入门与实战 构建主流PHP应用开发框架 Laravel开发框架教程书籍 "</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"拉杜 乔戈"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10007</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2017-11-03"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里将 <code>elasticsearch入门</code> 分解为 <code>elasticsearch</code> 和 <code>入门</code>。</p>
<h4 id="match-phrase"><a href="#match-phrase" class="headerlink" title="match_phrase"></a>match_phrase</h4><p>如果我们并不想那样进行分割，那我们换一个关键字 <code>match_phrase</code></p>
<p>搜索：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"match_phrase"</span>:&#123;</span><br><span class="line">            <span class="attr">"title"</span>:<span class="string">"elasticsearch入门"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就什么也没有了。</p>
<p>我们再搜索：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"match_phrase"</span>:&#123;</span><br><span class="line">            <span class="attr">"title"</span>:<span class="string">"elasticsearch"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">0.2876821</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EtWxL2kBvvhXwNB93p1F"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.2876821</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Elasticsearch实战"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"[美] 拉杜·乔戈（Radu Gheorghe） 马修·李·欣曼（Matthew"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10005</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2018-10-2"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们再换关键字：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"match_phrase"</span>:&#123;</span><br><span class="line">            <span class="attr">"title"</span>:<span class="string">"入门"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">0.3252806</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"FNW0L2kBvvhXwNB9pJ0W"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.3252806</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Python编程 从入门到实践"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"[美]埃里克·马瑟斯（Eric Matthes）"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10010</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-07-10"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EdWwL2kBvvhXwNB9h50h"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.28924954</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Java从入门到精通（第4版）（附光盘）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"明日科技"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10002</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-09-01"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"E9WzL2kBvvhXwNB9MZ3I"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.21268348</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Laravel入门与实战 构建主流PHP应用开发框架 Laravel开发框架教程书籍 "</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"拉杜 乔戈"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10007</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2017-11-03"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="多个字段查询"><a href="#多个字段查询" class="headerlink" title="多个字段查询"></a>多个字段查询</h4><p>搜索：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"multi_match"</span>:&#123;</span><br><span class="line">            <span class="attr">"query"</span>:<span class="string">"java"</span>,</span><br><span class="line">            <span class="attr">"fields"</span>:[<span class="string">"title"</span>, <span class="string">"author"</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;took&quot;: 2,</span><br><span class="line">    &quot;timed_out&quot;: false,</span><br><span class="line">    &quot;_shards&quot;: &#123;</span><br><span class="line">        &quot;total&quot;: 5,</span><br><span class="line">        &quot;successful&quot;: 5,</span><br><span class="line">        &quot;skipped&quot;: 0,</span><br><span class="line">        &quot;failed&quot;: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;hits&quot;: &#123;</span><br><span class="line">        &quot;total&quot;: 1,</span><br><span class="line">        &quot;max_score&quot;: 1.0623134,</span><br><span class="line">        &quot;hits&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;_index&quot;: &quot;book&quot;,</span><br><span class="line">                &quot;_type&quot;: &quot;it&quot;,</span><br><span class="line">                &quot;_id&quot;: &quot;EdWwL2kBvvhXwNB9h50h&quot;,</span><br><span class="line">                &quot;_score&quot;: 1.0623134,</span><br><span class="line">                &quot;_source&quot;: &#123;</span><br><span class="line">                    &quot;title&quot;: &quot;Java从入门到精通（第4版）（附光盘）&quot;,</span><br><span class="line">                    &quot;author&quot;: &quot;明日科技&quot;,</span><br><span class="line">                    &quot;word_count&quot;: 10002,</span><br><span class="line">                    &quot;publish_date&quot;: &quot;2016-09-01&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="语法查询"><a href="#语法查询" class="headerlink" title="语法查询"></a>语法查询</h4><p>搜索：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"query_string"</span>:&#123;</span><br><span class="line">            <span class="attr">"query"</span>:<span class="string">"java"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">1.0623134</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EdWwL2kBvvhXwNB9h50h"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1.0623134</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Java从入门到精通（第4版）（附光盘）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"明日科技"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10002</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-09-01"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>搜索：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"query_string"</span>:&#123;</span><br><span class="line">            <span class="attr">"query"</span>:<span class="string">"java and 入门"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">1.351563</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EdWwL2kBvvhXwNB9h50h"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1.351563</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Java从入门到精通（第4版）（附光盘）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"明日科技"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10002</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-09-01"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"FNW0L2kBvvhXwNB9pJ0W"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.3252806</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Python编程 从入门到实践"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"[美]埃里克·马瑟斯（Eric Matthes）"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10010</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-07-10"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"E9WzL2kBvvhXwNB9MZ3I"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.21268348</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Laravel入门与实战 构建主流PHP应用开发框架 Laravel开发框架教程书籍 "</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"拉杜 乔戈"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10007</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2017-11-03"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个给我的个人感觉不好玩，就小小的尝试一下吧。</p>
<h4 id="字段级别的查询"><a href="#字段级别的查询" class="headerlink" title="字段级别的查询"></a>字段级别的查询</h4><p>搜索：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"term"</span>:&#123;</span><br><span class="line">            <span class="attr">"word_count"</span>:<span class="string">"100"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">14</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"FdW1L2kBvvhXwNB91Z2M"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"数据结构（C语言版）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"严蔚敏"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">100</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2007-03-09"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>term：用于查询特定值</p>
<h4 id="范围查询"><a href="#范围查询" class="headerlink" title="范围查询"></a>范围查询</h4><p>例如，我们搜索大于10000个字的书：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"range"</span>:&#123;</span><br><span class="line">            <span class="attr">"word_count"</span>:&#123;</span><br><span class="line">                <span class="attr">"gte"</span>:<span class="number">10000</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EtWxL2kBvvhXwNB93p1F"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Elasticsearch实战"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"[美] 拉杜·乔戈（Radu Gheorghe） 马修·李·欣曼（Matthew"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10005</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2018-10-2"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EdWwL2kBvvhXwNB9h50h"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Java从入门到精通（第4版）（附光盘）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"明日科技"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10002</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-09-01"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"E9WzL2kBvvhXwNB9MZ3I"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Laravel入门与实战 构建主流PHP应用开发框架 Laravel开发框架教程书籍 "</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"拉杜 乔戈"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10007</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2017-11-03"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"FNW0L2kBvvhXwNB9pJ0W"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Python编程 从入门到实践"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"[美]埃里克·马瑟斯（Eric Matthes）"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10010</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-07-10"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>时间也可以搜索范围，比如我们搜索 (2016-09-01, 2018-01-01) 这个时间段之间要出版书：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"range"</span>:&#123;</span><br><span class="line">            <span class="attr">"publish_date"</span>:&#123;</span><br><span class="line">                <span class="attr">"gt"</span>:<span class="string">"2016-09-01"</span>,</span><br><span class="line">                <span class="attr">"lt"</span>:<span class="string">"2018-01-01"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"E9WzL2kBvvhXwNB9MZ3I"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Laravel入门与实战 构建主流PHP应用开发框架 Laravel开发框架教程书籍 "</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"拉杜 乔戈"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10007</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2017-11-03"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>取等吧，[2016-09-01, 2018-01-01) ：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"range"</span>:&#123;</span><br><span class="line">            <span class="attr">"publish_date"</span>:&#123;</span><br><span class="line">                <span class="attr">"gte"</span>:<span class="string">"2016-09-01"</span>,</span><br><span class="line">                <span class="attr">"lt"</span>:<span class="string">"2018-01-01"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EdWwL2kBvvhXwNB9h50h"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Java从入门到精通（第4版）（附光盘）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"明日科技"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10002</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-09-01"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"E9WzL2kBvvhXwNB9MZ3I"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Laravel入门与实战 构建主流PHP应用开发框架 Laravel开发框架教程书籍 "</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"拉杜 乔戈"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10007</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2017-11-03"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当前日期，可用关键字  <code>now</code></p>
<h4 id="关键字：filter"><a href="#关键字：filter" class="headerlink" title="关键字：filter"></a>关键字：filter</h4><p>在查询过程中，只判断文档是否满足条件，只有Yes或者No。</p>
<p>举个例子，我们要搜索字数是100的有哪些，搜索如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"bool"</span>:&#123;</span><br><span class="line">            <span class="attr">"filter"</span>:&#123;</span><br><span class="line">                <span class="attr">"term"</span>:&#123;</span><br><span class="line">                    <span class="attr">"word_count"</span>:<span class="number">100</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">40</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"FdW1L2kBvvhXwNB91Z2M"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"数据结构（C语言版）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"严蔚敏"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">100</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2007-03-09"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="复杂查询"><a href="#复杂查询" class="headerlink" title="复杂查询"></a>复杂查询</h4><p><strong>固定分数查询：constant_score</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"constant_score"</span>:&#123;</span><br><span class="line">            <span class="attr">"filter"</span>:&#123;</span><br><span class="line">                <span class="attr">"match"</span>:&#123;</span><br><span class="line">                    <span class="attr">"title"</span>:<span class="string">"ElasticSearch"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"boost"</span>:<span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不支持 match查询，支持filter查询。</p>
<h4 id="布尔查询：bool"><a href="#布尔查询：bool" class="headerlink" title="布尔查询：bool"></a>布尔查询：bool</h4><p>搜索：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"bool"</span>: &#123;</span><br><span class="line">            <span class="attr">"should"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"match"</span>: &#123;</span><br><span class="line">                        <span class="attr">"author"</span>: <span class="string">"明日科技"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"match"</span>: &#123;</span><br><span class="line">                        <span class="attr">"title"</span>: <span class="string">"ElasticSearch"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">0.9808292</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EdWwL2kBvvhXwNB9h50h"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.9808292</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Java从入门到精通（第4版）（附光盘）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"明日科技"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10002</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-09-01"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EtWxL2kBvvhXwNB93p1F"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">0.2876821</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Elasticsearch实战"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"[美] 拉杜·乔戈（Radu Gheorghe） 马修·李·欣曼（Matthew"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10005</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2018-10-2"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>是 <code>OR</code> 的关系</p>
<p>看一下 <code>AND</code> 关系：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"bool"</span>: &#123;</span><br><span class="line">            <span class="attr">"must"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"match"</span>: &#123;</span><br><span class="line">                        <span class="attr">"author"</span>: <span class="string">"明日科技"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"match"</span>: &#123;</span><br><span class="line">                        <span class="attr">"title"</span>: <span class="string">"ElasticSearch"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们换一下关键字，搜索：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"bool"</span>: &#123;</span><br><span class="line">            <span class="attr">"must"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"match"</span>: &#123;</span><br><span class="line">                        <span class="attr">"author"</span>: <span class="string">"明日科技"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"match"</span>: &#123;</span><br><span class="line">                        <span class="attr">"title"</span>: <span class="string">"java"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">13</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">2.0431426</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EdWwL2kBvvhXwNB9h50h"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">2.0431426</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Java从入门到精通（第4版）（附光盘）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"明日科技"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10002</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-09-01"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>加拦截条件，我们查看字数是10000的：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"bool"</span>: &#123;</span><br><span class="line">            <span class="attr">"must"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"match"</span>: &#123;</span><br><span class="line">                        <span class="attr">"author"</span>: <span class="string">"明日科技"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"match"</span>: &#123;</span><br><span class="line">                        <span class="attr">"title"</span>: <span class="string">"java"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"filter"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"term"</span>: &#123;</span><br><span class="line">                        <span class="attr">"word_count"</span>: <span class="number">10000</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>好吧，我们将word_count换成10002：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>: &#123;</span><br><span class="line">        <span class="attr">"bool"</span>: &#123;</span><br><span class="line">            <span class="attr">"must"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"match"</span>: &#123;</span><br><span class="line">                        <span class="attr">"author"</span>: <span class="string">"明日科技"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"match"</span>: &#123;</span><br><span class="line">                        <span class="attr">"title"</span>: <span class="string">"java"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"filter"</span>:[&#123;</span><br><span class="line">                <span class="attr">"term"</span>:&#123;</span><br><span class="line">                    <span class="attr">"word_count"</span>:<span class="number">10002</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">2.0431426</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EdWwL2kBvvhXwNB9h50h"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">2.0431426</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Java从入门到精通（第4版）（附光盘）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"明日科技"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10002</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-09-01"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>关键字：must_not</strong></p>
<p>例如，我不看java：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"query"</span>:&#123;</span><br><span class="line">        <span class="attr">"bool"</span>:&#123;</span><br><span class="line">            <span class="attr">"must_not"</span>:&#123;</span><br><span class="line">                <span class="attr">"term"</span>:&#123;</span><br><span class="line">                    <span class="attr">"title"</span>:<span class="string">"java"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"took"</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">"timed_out"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"_shards"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"successful"</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">"skipped"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"failed"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"hits"</span>: &#123;</span><br><span class="line">        <span class="attr">"total"</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">"max_score"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"hits"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"FdW1L2kBvvhXwNB91Z2M"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"数据结构（C语言版）"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"严蔚敏"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">100</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2007-03-09"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"EtWxL2kBvvhXwNB93p1F"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Elasticsearch实战"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"[美] 拉杜·乔戈（Radu Gheorghe） 马修·李·欣曼（Matthew"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10005</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2018-10-2"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"E9WzL2kBvvhXwNB9MZ3I"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Laravel入门与实战 构建主流PHP应用开发框架 Laravel开发框架教程书籍 "</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"拉杜 乔戈"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10007</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2017-11-03"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"_index"</span>: <span class="string">"book"</span>,</span><br><span class="line">                <span class="attr">"_type"</span>: <span class="string">"it"</span>,</span><br><span class="line">                <span class="attr">"_id"</span>: <span class="string">"FNW0L2kBvvhXwNB9pJ0W"</span>,</span><br><span class="line">                <span class="attr">"_score"</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">"_source"</span>: &#123;</span><br><span class="line">                    <span class="attr">"title"</span>: <span class="string">"Python编程 从入门到实践"</span>,</span><br><span class="line">                    <span class="attr">"author"</span>: <span class="string">"[美]埃里克·马瑟斯（Eric Matthes）"</span>,</span><br><span class="line">                    <span class="attr">"word_count"</span>: <span class="number">10010</span>,</span><br><span class="line">                    <span class="attr">"publish_date"</span>: <span class="string">"2016-07-10"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>关于搜索，这只是入门，我们会在第三节会继续讨论搜索。</p>
<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><ul>
<li><a href="https://www.imooc.com/learn/889" target="_blank" rel="noopener">ElasticSearch入门</a></li>
</ul>
<ul>
<li><a href="https://www.elastic.co/" target="_blank" rel="noopener">Elastic官网</a></li>
</ul>
<ul>
<li><a href="https://www.elastic.co/cn/products/elasticsearch" target="_blank" rel="noopener">ElasticSearch</a></li>
</ul>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" target="_blank" rel="noopener">ElasticSearch Docs</a></li>
</ul>
<ul>
<li><a href="https://github.com/mobz/elasticsearch-head" target="_blank" rel="noopener">ElasticSearch Head</a></li>
</ul>
<ul>
<li><a href="http://www.sohu.com/a/257956489_430392" target="_blank" rel="noopener">搜索软件Elastic上市：市值近50亿美元 是开源项目商业化范本 </a></li>
</ul>
<h2 id="ElasticSearch-学习系列"><a href="#ElasticSearch-学习系列" class="headerlink" title="ElasticSearch 学习系列"></a>ElasticSearch 学习系列</h2><ul>
<li><a href="https://www.jianshu.com/p/7ea5f6fa5d66" target="_blank" rel="noopener">Elasticsearch入门篇——基础知识</a></li>
</ul>
<ul>
<li><a href="https://www.jianshu.com/p/bd2da1cde6f5" target="_blank" rel="noopener">Elasticsearch实战篇——Spring Boot整合ElasticSearch</a></li>
</ul>
<ul>
<li><a href="https://www.jianshu.com/p/69dc8ff24ecc" target="_blank" rel="noopener">Elasticsearch专题篇——搜索</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">冯文议 · Erwin Feng</p>
              <p class="site-description motion-element" itemprop="description">我叫冯文议，Java工程师。 2017年毕业于阿坝师范学院计算机应用专业， 现在就职于深圳警圣技术股份有限公司， 主要负责接口开发工作。 开源软件：JavaLib，api-result。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">冯文议 · Erwin Feng</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">13.7k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
